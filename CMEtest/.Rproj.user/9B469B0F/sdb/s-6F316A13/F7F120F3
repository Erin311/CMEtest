{
    "contents" : "# Cleaning Environment\nrm(list = ls())\n# Loading packages\nsuppressMessages(library(robust))\nsuppressMessages(require(PortfolioAnalytics))\nsuppressMessages(require(PerformanceAnalytics))\nsuppressMessages(library(tawny))\n# Loading  optimization packages\nsuppressMessages(require(ROI))\nsuppressMessages(require(ROI.plugin.glpk))\nsuppressMessages(require(ROI.plugin.quadprog))\noptions(warn=-1)\n##################\n## Loading test ##\n##################\n\nlibrary(CMEtest)\n\n##################\n## Loading data ##\n##################\n\n# Loading edhec data\ndata(sp500.subset)\nreturns <- sp500.subset[1:50,1:10]\nassets <- colnames(returns)\n\n##################################################\n## Specifying Global Minimum Variance portfolio ##\n##################################################\n\n\n## Specifying portfolio\nport_gmv <- portfolio.spec(assets = assets)\n## specifying long only constraing\nlong_const = 0\n## specifying unform upper box constraints\nupper_box <- 0.60\n\n## Setting constraints\nport_gmv <- add.constraint(portfolio = port_gmv,\n                           type = \"box\",\n                           min = long_const,\n                           max = upper_box)\n## Adding objective function\nport_gmv <- add.objective(portfolio = port_gmv,\n                          type = \"risk\",\n                          name = \"var\")\n\n## Showing portfolio specification\nprint(port_gmv)\n\n###############################\n## Specifying CME cov object ##\n###############################\n\n## Specifying sample cov\n\nmleCovSpec <- CovSpec(smooth = NULL,\n                      estim = 'mle',\n                      shrink = NULL,\n                      filter = NULL)\n\n## Showing summary\nsummary(mleCovSpec)\n\n## Specifying robust mcd cov\n\nrobCovSpec <- CovSpec(smooth = NULL,\n                      estim = 'mcd',\n                      shrink = NULL,\n                      filter = NULL)\n\n## Showing summary\nsummary(robCovSpec)\n\n##  Generating Moment functions. These functions will dynamically compute\n## location and scatter when passed to optimize.portfolio.\n\nMleMomentFUN <- MakeMomentFUN(mleCovSpec)\nRobMomentFUN <- MakeMomentFUN(robCovSpec)\n\n###################################\n## Let's Optimize the potfolios! ##\n###################################\n\n# mle version\nopt_gmv_mle <- optimize.portfolio(R = returns,\n                                 portfolio = port_gmv,\n                                 optimize_method = \"ROI\",\n                                 momentFUN = \"MleMomentFUN\",\n                                 trace = TRUE)\n\n## Robust version\nopt_gmv_rob <- optimize.portfolio(R = returns,\n                                 portfolio = port_gmv,\n                                 optimize_method = \"ROI\",\n                                 momentFUN = \"RobMomentFUN\",\n                                 trace = TRUE)\n\nextractWeights(opt_gmv_mle)\nextractWeights(opt_gmv_rob)\n\n\n## Recomputing the covariance can be expansive. It is also possible to pass the already\n## computed location and scale value to porfolio analytics. It is enough to call\n## MakeMomentFun on the computed covariance object instead of the specification object\n\n## Let us compute the covariances\nmleCovEst <- Estimate(mleCovSpec, returns)\nrobCovEst <- Estimate(robCovSpec, returns)\n\n## Altough not required let us check the covariance just for fun\nGetCorr(mleCovEst)\nGetCorr(robCovEst)\n\n\n## Now we create Precomputed moment functions\nMlePrecompMomentFUN <- MakeMomentFUN(mleCovEst)\nRobPrecompMomentFUN <- MakeMomentFUN(robCovEst)\n\n# mle version\nopt_gmv_mle2 <- optimize.portfolio(R = returns,\n                                 portfolio = port_gmv,\n                                 optimize_method = \"ROI\",\n                                 momentFUN = \"MlePrecompMomentFUN\",\n                                 trace = TRUE)\n\n## Robust version\nopt_gmv_rob2 <- optimize.portfolio(R = returns,\n                                  portfolio = port_gmv,\n                                  optimize_method = \"ROI\",\n                                  momentFUN = \"RobPrecompMomentFUN\",\n                                  trace = TRUE)\n\nextractWeights(opt_gmv_mle2)\nextractWeights(opt_gmv_rob2)\n",
    "created" : 1395612426043.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1643712910",
    "id" : "F7F120F3",
    "lastKnownWriteTime" : 1395614001,
    "path" : "~/Dropbox/gsoc2014/GSOC2014/testpkgfinal/CMEtest/demo/demoTest.R",
    "project_path" : "demo/demoTest.R",
    "properties" : {
    },
    "source_on_save" : true,
    "type" : "r_source"
}